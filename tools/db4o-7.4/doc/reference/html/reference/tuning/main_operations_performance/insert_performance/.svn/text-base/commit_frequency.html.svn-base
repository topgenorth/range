<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Commit Frequency</title>
    <link rel="stylesheet" type="text/css" href="../../../../style.css">
  </head>
  <body>
    <div class="CommonContent">
      <div class="CommonContentArea">
        <h1>Commit Frequency</h1><script>
//We attach this function to a browser object as a variable so that if multiple of these blocks are
//present on the same page, then they will simply over-write eachother with the same function instead
//of generating a naming collision.
window.WikiCodeFormattingCopyToClipboard = function copyToClipboard(sID){
	var sContent = document.getElementById(sID).innerText;
	if( window.clipboardData && clipboardData.setData )
	{
		clipboardData.setData("Text", sContent);
	}
	else
	{
		alert("You must enable javascript access to your clipboard for this feature to work. Please referr to your browser documentation or Google search for instructions.");
	}
}
</script>

<p>Commit is an expensive operation as it needs to physically
access hard drive several times and write changes. However, only commit can
ensure that the objects are actually stored in the database and won't be lost.</p>

<p>The following test compares different commit frequencies
(one commit for all objects or several commits after a specified amount of
objects). The test runs against a hard drive:</p>



<span name="cs_wiki_filter" csw_filters="net">

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">InsertPerformanceBenchmark.cs: <span class="fscMemberName">RunCommitTest</span></span></div><div class="fscCode"><pre ID="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_RunCommitTest_474_78"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/None.gif" align="top"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> RunCommitTest()
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_RunCommitTest_474_78_37_479_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_RunCommitTest_474_78_37_479_Open_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_RunCommitTest_474_78_37_479_Closed_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_RunCommitTest_474_78_37_479_Closed_Text').style.display='inline';"/><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_RunCommitTest_474_78_37_479_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_RunCommitTest_474_78_37_479_Closed_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_RunCommitTest_474_78_37_479_Open_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_RunCommitTest_474_78_37_479_Open_Text').style.display='inline';"/>        </span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_RunCommitTest_474_78_37_479_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_RunCommitTest_474_78_37_479_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            ConfigureForCommitTest();
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            InitForCommitTest();
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">07</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Clean();
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            System.Console.WriteLine(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Storing objects as a bulk:</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Open();
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Store();
</span><span style="color: #008080;">11</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Close();
</span><span style="color: #008080;">12</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>
</span><span style="color: #008080;">13</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Clean();
</span><span style="color: #008080;">14</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            System.Console.WriteLine(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Storing objects with commit after each </span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> _commitInterval </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;"> objects:</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">15</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Open();
</span><span style="color: #008080;">16</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StoreWithCommit();
</span><span style="color: #008080;">17</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            Close();
</span><span style="color: #008080;">18</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>        }</span></span></div></pre></div></div>

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">InsertPerformanceBenchmark.cs: <span class="fscMemberName">ConfigureForCommitTest</span></span></div><div class="fscCode"><pre ID="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_ConfigureForCommitTest_556_87"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/None.gif" align="top"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> ConfigureForCommitTest()
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_ConfigureForCommitTest_556_87_46_418_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_ConfigureForCommitTest_556_87_46_418_Open_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_ConfigureForCommitTest_556_87_46_418_Closed_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_ConfigureForCommitTest_556_87_46_418_Closed_Text').style.display='inline';"/><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_ConfigureForCommitTest_556_87_46_418_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_ConfigureForCommitTest_556_87_46_418_Closed_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_ConfigureForCommitTest_556_87_46_418_Open_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_ConfigureForCommitTest_556_87_46_418_Open_Text').style.display='inline';"/>        </span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_ConfigureForCommitTest_556_87_46_418_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_ConfigureForCommitTest_556_87_46_418_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            IConfiguration config </span><span style="color: #000000;">=</span><span style="color: #000000;"> Db4oFactory.Configure();
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            config.LockDatabaseFile(</span><span style="color: #0000FF;">false</span><span style="color: #000000;">);
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            config.WeakReferences(</span><span style="color: #0000FF;">false</span><span style="color: #000000;">);
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #008000;">//</span><span style="color: #008000;"> FlushFileBuffers should be set to true to ensure that
</span><span style="color: #008080;">07</span><span style="color: #008000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #008000;">//</span><span style="color: #008000;"> the commit information is physically written 
</span><span style="color: #008080;">08</span><span style="color: #008000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #008000;">//</span><span style="color: #008000;"> and in the correct order</span><span style="color: #008000;">
</span><span style="color: #008080;">09</span><span style="color: #008000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/></span><span style="color: #000000;">            config.FlushFileBuffers(</span><span style="color: #0000FF;">false</span><span style="color: #000000;">);
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>        }</span></span></div></pre></div></div>

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">InsertPerformanceBenchmark.cs: <span class="fscMemberName">InitForCommitTest</span></span></div><div class="fscCode"><pre ID="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_InitForCommitTest_647_82"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">1</span><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/None.gif" align="top"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> InitForCommitTest()
</span><span style="color: #008080;">2</span><span style="color: #000000;"><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_InitForCommitTest_647_82_41_179_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_InitForCommitTest_647_82_41_179_Open_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_InitForCommitTest_647_82_41_179_Closed_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_InitForCommitTest_647_82_41_179_Closed_Text').style.display='inline';"/><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_InitForCommitTest_647_82_41_179_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_InitForCommitTest_647_82_41_179_Closed_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_InitForCommitTest_647_82_41_179_Open_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_InitForCommitTest_647_82_41_179_Open_Text').style.display='inline';"/>        </span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_InitForCommitTest_647_82_41_179_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_InitForCommitTest_647_82_41_179_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">3</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            _count </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">100000</span><span style="color: #000000;">;
</span><span style="color: #008080;">4</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            _commitInterval </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">10000</span><span style="color: #000000;">;
</span><span style="color: #008080;">5</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            _depth </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">3</span><span style="color: #000000;">;
</span><span style="color: #008080;">6</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            _isClientServer </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">7</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>        }</span></span></div></pre></div></div>

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">InsertPerformanceBenchmark.cs: <span class="fscMemberName">Store</span></span></div><div class="fscCode"><pre ID="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/None.gif" align="top"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> Store()
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_29_471_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_29_471_Open_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_29_471_Closed_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_29_471_Closed_Text').style.display='inline';"/><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_29_471_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_29_471_Closed_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_29_471_Open_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_29_471_Open_Text').style.display='inline';"/>        </span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_29_471_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_29_471_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StartTimer();
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #0000FF;">for</span><span style="color: #000000;"> (</span><span style="color: #0000FF;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> _count; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_114_360_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_114_360_Open_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_114_360_Closed_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_114_360_Closed_Text').style.display='inline';"/><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_114_360_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_114_360_Closed_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_114_360_Open_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_114_360_Open_Text').style.display='inline';"/>            </span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_114_360_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_114_360_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                Item item </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Item(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">load</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">, </span><span style="color: #0000FF;">null</span><span style="color: #000000;">);
</span><span style="color: #008080;">07</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                </span><span style="color: #0000FF;">for</span><span style="color: #000000;"> (</span><span style="color: #0000FF;">int</span><span style="color: #000000;"> j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> _depth; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_233_303_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_233_303_Open_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_233_303_Closed_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_233_303_Closed_Text').style.display='inline';"/><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_233_303_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_233_303_Closed_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_233_303_Open_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_233_303_Open_Text').style.display='inline';"/>                </span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_233_303_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_Store_733_70_233_303_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                    item </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Item(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">load</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">, item);
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>                }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">11</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                objectContainer.Set(item);
</span><span style="color: #008080;">12</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>            }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">13</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            objectContainer.Commit();
</span><span style="color: #008080;">14</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StopTimer(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Store </span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> TotalObjects() </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;"> objects</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">15</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>        }</span></span></div></pre></div></div>

<div class="FormattedSourceCode"><div class="fscHeader"><span class="fscFileName">InsertPerformanceBenchmark.cs: <span class="fscMemberName">StoreWithCommit</span></span></div><div class="fscCode"><pre ID="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">01</span><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/None.gif" align="top"/><span style="color: #0000FF;">private</span><span style="color: #000000;"> </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> StoreWithCommit()
</span><span style="color: #008080;">02</span><span style="color: #000000;"><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_39_675_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_39_675_Open_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_39_675_Closed_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_39_675_Closed_Text').style.display='inline';"/><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_39_675_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_39_675_Closed_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_39_675_Open_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_39_675_Open_Text').style.display='inline';"/>        </span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_39_675_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_39_675_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">03</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StartTimer();
</span><span style="color: #008080;">04</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #0000FF;">int</span><span style="color: #000000;"> k </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">;
</span><span style="color: #008080;">05</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            </span><span style="color: #0000FF;">while</span><span style="color: #000000;"> (k </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> _count)
</span><span style="color: #008080;">06</span><span style="color: #000000;"><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_133_564_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_133_564_Open_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_133_564_Closed_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_133_564_Closed_Text').style.display='inline';"/><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_133_564_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_133_564_Closed_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_133_564_Open_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_133_564_Open_Text').style.display='inline';"/>            </span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_133_564_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_133_564_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">07</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                </span><span style="color: #0000FF;">for</span><span style="color: #000000;"> (</span><span style="color: #0000FF;">int</span><span style="color: #000000;"> i </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">0</span><span style="color: #000000;">; i </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> _commitInterval; i</span><span style="color: #000000;">++</span><span style="color: #000000;">)
</span><span style="color: #008080;">08</span><span style="color: #000000;"><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_209_508_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_209_508_Open_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_209_508_Closed_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_209_508_Closed_Text').style.display='inline';"/><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_209_508_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_209_508_Closed_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_209_508_Open_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_209_508_Open_Text').style.display='inline';"/>                </span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_209_508_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_209_508_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">09</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                    Item item </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Item(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">load</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">, </span><span style="color: #0000FF;">null</span><span style="color: #000000;">);
</span><span style="color: #008080;">10</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                    k</span><span style="color: #000000;">++</span><span style="color: #000000;">;
</span><span style="color: #008080;">11</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                    </span><span style="color: #0000FF;">for</span><span style="color: #000000;"> (</span><span style="color: #0000FF;">int</span><span style="color: #000000;"> j </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #800080;">1</span><span style="color: #000000;">; j </span><span style="color: #000000;">&lt;</span><span style="color: #000000;"> _depth; j</span><span style="color: #000000;">++</span><span style="color: #000000;">)
</span><span style="color: #008080;">12</span><span style="color: #000000;"><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_365_443_Open_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockStart.gif" align="top" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_365_443_Open_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_365_443_Closed_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_365_443_Closed_Text').style.display='inline';"/><img id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_365_443_Closed_Image" src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ContractedSubBlock.gif" align="top" style="display: none;" onClick="this.style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_365_443_Closed_Text').style.display='none'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_365_443_Open_Image').style.display='inline'; document.getElementById('..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_365_443_Open_Text').style.display='inline';"/>                    </span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_365_443_Closed_Text" style="border: solid 1px #808080; background-color: #FFFFFF; display: none;">...</span><span id="..PerformanceCS.ZipsInsertPerformanceBenchmark.Cs_InsertPerformanceBenchmark.Cs_StoreWithCommit_807_80_365_443_Open_Text"><span style="color: #000000;">{
</span><span style="color: #008080;">13</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                        item </span><span style="color: #000000;">=</span><span style="color: #000000;"> </span><span style="color: #0000FF;">new</span><span style="color: #000000;"> Item(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">load</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">, item);
</span><span style="color: #008080;">14</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>                    }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">15</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                    objectContainer.Set(item);
</span><span style="color: #008080;">16</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>                }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">17</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>                objectContainer.Commit();
</span><span style="color: #008080;">18</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedSubBlockEnd.gif" align="top"/>            }</span></span><span style="color: #000000;">
</span><span style="color: #008080;">19</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            objectContainer.Commit();
</span><span style="color: #008080;">20</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/InBlock.gif" align="top"/>            StopTimer(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Store </span><span style="color: #800000;">&quot;</span><span style="color: #000000;"> </span><span style="color: #000000;">+</span><span style="color: #000000;"> TotalObjects() </span><span style="color: #000000;">+</span><span style="color: #000000;"> </span><span style="color: #800000;">&quot;</span><span style="color: #800000;"> objects</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">);
</span><span style="color: #008080;">21</span><span style="color: #000000;"><img src="../../../../Utility/ActiPro.CodeHighligher/OutliningIndicators/ExpandedBlockEnd.gif" align="top"/>        }</span></span></div></pre></div></div>

</span>

<p>The following results were achieved for the
<a href="../insert_performance.html" class="wikiLink">testing configuration</a>:</p>



<span name="cs_wiki_filter" csw_filters="net">

<p>.NET:</p>

<p>Storing objects as a bulk:</p>

<p>Store 300000 objects: 17748ms</p>

<p>Storing objects with commit after each 10000 objects:</p>

<p>Store 300000 objects: 18163ms</p>

</span></div>
    </div>
    <div id="footer">
					This revision (1) was last Modified 2007-12-30T14:34:56 by Tetyana.
				</div>
  </body>
</html>